(()=>{"use strict";var e={720:(e,t,n)=>{n.d(t,{A:()=>m});var r=n(601),o=n.n(r),i=n(314),a=n.n(i),s=n(417),c=n.n(s),l=new URL(n(747),n.b),d=new URL(n(641),n.b),p=a()(o()),h=c()(l),u=c()(d);p.push([e.id,`* {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n    font-family: 'Roboto';\n}\n\n@font-face {\n    font-family: 'Roboto';\n    src: url(${h});\n}\n\nbody {\n    height: 100vh;\n    /* background-color: black; */\n    position: relative;\n    display: grid;\n    grid-template-columns: 1fr 3fr 1fr;\n    grid-template-rows: 4fr 10fr 3fr;\n    /* background-image: url('../assets/battle-background.webp'); */\n}\n\n:root {\n    --box-size: 40px;\n    --grid-color: #64748b;\n}\n\n/* Start screen */\n.welcome-container {\n    display: grid;\n    justify-content: center;\n    align-items: center;\n    background-image: url(${u});\n    background-size: cover;\n    background-position: 0 60%;\n    height: 100%;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    transition: transform 0.5s ease-in-out;\n}\n\n.welcome-exit {\n    transform: translateX(-100%); /* Slide out to the left */\n}\n\n.welcome-btn-container, .game-dialog {\n    background-color: #082f49;\n    border-radius: 50px;\n    width: 800px;\n    height: 300px;\n    padding: 50px 20px;\n    border: none;\n    outline: none;\n    box-shadow: 2px 2px 6px 2px black;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-around;\n}\n\n.welcome-header, .dialog-header  {\n    color: white;\n    text-align: center;\n    font-size: 40px;\n}\n\n.welcome-header {\n    text-transform: uppercase;\n    letter-spacing: 0.25ch;\n}\n\n.welcome-btn-row {\n    display: flex;\n    justify-content: space-around;\n}\n\n.welcome-btn {\n    background-color: #0284c7;\n    font-size: 24px;\n    border: none;\n    outline: none;\n    padding: 16px 32px;\n    border-radius: 20px;\n    transition-duration: 0.2s;\n    color: white;\n}\n\n.welcome-btn:hover {\n    cursor: pointer;\n    background-color: #0ea5e9;\n}\n\n/* Game over */\n.game-dialog {\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -20%);\n}\n\n.game-dialog[open] {\n    opacity: 0.75;\n}\n\n.game-dialog::backdrop {\n    background: rgba(1, 11, 46, 0.5);\n}\n\n.dialog-subheader {\n    color: white;\n    text-align: center;\n    font-size: 25px;\n    font-weight: 100;\n}\n\n.dialog-container {\n    width:100%;\n    height:100%;\n    display: grid;\n    align-items: center;\n    justify-content: center;\n}\n\n/* Header styling */\n.top-banner {\n    display: grid;\n    align-items: center;\n    justify-content: center;\n    padding: 40px 0;\n    grid-column: 1/-1;\n}\n\n.battleships-header {\n    height: 200px;\n    width: 1000px;\n    border-radius: 40px;\n}\n\n/* Grid styling */\n.grid-container {\n    flex: 1;\n}\n\n.grid-container, .grid-container * {\n    user-select: none;\n}\n\n.grid-row {\n    display: flex;\n}\n\n.box, .coordinate {\n    max-width: 55px;\n    flex:1;\n    aspect-ratio: 1;\n}\n\n.box {\n    border: 1px solid black;\n    display: grid;\n    justify-content: center;\n    align-items: center;\n}\n\n.box-empty.box-free {\n    background-color: rgba(34, 197, 94, 0.8);\n}\n\n.coordinate {\n    color: white;\n    text-align: center;\n    vertical-align: center;\n    line-height: var(--box-size);\n    font-size: 18px;\n    font-weight: 700;\n    cursor: alias;\n    user-select: none;\n}\n\n.box-empty {\n    background-color: var(--grid-color);\n}\n\n.box-empty:hover {\n    cursor: pointer;\n}\n\n.box-ship {\n    background-color:var(--grid-color);\n}\n\n.box-hit {\n    background-color:var(--grid-color);\n}\n\n.box-miss {\n    background-color:var(--grid-color);\n}\n\n.box-miss > .inner-box {\n    background-color: white;\n    box-shadow: 2px 2px 6px 0 black;\n}\n\n.box-hit > .inner-box {\n    background-color: red;\n    box-shadow: 2px 2px 6px 0 black;\n}\n\n.box-ship > .inner-box {\n    background-color: #0284c7;\n    width: calc(var(--box-size)/1.5);\n    height: calc(var(--box-size)/1.5);\n    box-shadow: 2px 2px 6px 0 black;\n}\n\n.inner-box {\n    width: calc(var(--box-size)/3);\n    height: calc(var(--box-size)/3);\n    background-color: #1e293b;\n    border-radius: 50%;\n}\n\n/* Game sizing */\n\n.game-container {\n    grid-column: 2/3;\n    display: flex;\n    gap: 100px;\n    justify-content: center;\n    padding-top: 20px;\n    box-sizing: border-box;\n    width: 100%;\n    position: relative;\n}\n\n.main-section {\n    flex:1;\n}\n\n.player-name {\n    /* margin-left: var(--box-size); */\n    color: white;\n    margin-bottom: 10px;\n    font-weight: 100;\n    font-size: 30px;\n}\n\n/* Gallery */\n.gallery {\n    padding: 16px;\n    background-color: var(--grid-color);\n    max-width: 550px;\n    display: flex;\n    flex-direction: column;\n    gap:20px;\n    aspect-ratio: 1/1;\n    justify-content: space-around;\n}\n\n.top-gallery {\n    display: flex;\n    flex-direction: column;\n    gap:20px;\n}\n\n.bottom-gallery {\n    display: flex;\n    flex-direction: row;\n    gap:20px;\n}\n\n.ship, .ship-empty {\n    display: flex;\n    width: fit-content;\n    gap: 20px;\n    border-radius: 20%;\n}\n\n.ship.horizontal {\n    flex-direction: row;\n    padding: 10px 20px;\n}\n\n.ship.vertical {\n    flex-direction: column;\n    padding: 20px 10px;\n    height: fit-content;\n}\n\n.ship {\n    background-color: #0284c7;\n}\n\n.ship.ship-empty {\n    background-color: transparent;\n    border: 2px dashed black;\n}\n\n.ship.ship-empty:hover {\n    cursor: pointer;\n}\n\n.ship:hover {\n    cursor: pointer;\n}\n\n/* Buttons */\n.button-container {\n    grid-row: 3/4;\n    grid-column: 2/3;\n    margin: 0 auto;\n}\n\n.start-btn {\n    padding: 20px 48px;\n    border-radius: 20px;\n    font-size: 32px;\n    border: none;\n    outline: none;\n    background-color: green;\n    color: white;\n    font-weight: 700;\n}\n\n.start-btn:hover {\n    cursor: pointer;\n}`,""]);const m=p},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,o,i){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(r)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(a[c]=!0)}for(var l=0;l<e.length;l++){var d=[].concat(e[l]);r&&a[d[0]]||(void 0!==i&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=i),n&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=n):d[2]=n),o&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=o):d[4]="".concat(o)),t.push(d))}},t}},417:e=>{e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},601:e=>{e.exports=function(e){return e[1]}},72:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var i={},a=[],s=0;s<e.length;s++){var c=e[s],l=r.base?c[0]+r.base:c[0],d=i[l]||0,p="".concat(l," ").concat(d);i[l]=d+1;var h=n(p),u={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==h)t[h].references++,t[h].updater(u);else{var m=o(u,r);r.byIndex=s,t.splice(s,0,{identifier:p,updater:m,references:1})}a.push(p)}return a}function o(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,o){var i=r(e=e||[],o=o||{});return function(e){e=e||[];for(var a=0;a<i.length;a++){var s=n(i[a]);t[s].references--}for(var c=r(e,o),l=0;l<i.length;l++){var d=n(i[l]);0===t[d].references&&(t[d].updater(),t.splice(d,1))}i=c}}},659:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},56:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var o=void 0!==n.layer;o&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,o&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},747:(e,t,n)=>{e.exports=n.p+"27f62b53b93858475a7f.ttf"},641:(e,t,n)=>{e.exports=n.p+"00d3be16d5f052e5a2e5.jpeg"}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={id:r,exports:{}};return e[r](i,i.exports,n),i.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var r=t.getElementsByTagName("script");if(r.length)for(var o=r.length-1;o>-1&&(!e||!/^http(s?):/.test(e));)e=r[o--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),n.b=document.baseURI||self.location.href,n.nc=void 0;var r=n(72),o=n.n(r),i=n(825),a=n.n(i),s=n(659),c=n.n(s),l=n(56),d=n.n(l),p=n(540),h=n.n(p),u=n(113),m=n.n(u),b=n(720),g={};g.styleTagTransform=m(),g.setAttributes=d(),g.insert=c().bind(null,"head"),g.domAPI=a(),g.insertStyleElement=h(),o()(b.A,g),b.A&&b.A.locals&&b.A.locals;class f{constructor(e){this.viewController=e,this.container=document.createElement("div")}renderLaunchScreen(){const e=document.querySelector("body");this.container.className="welcome-container";const t=document.createElement("div");t.className="welcome-btn-container";const n=document.createElement("h1");n.className="welcome-header",n.innerText="Click to start!",t.appendChild(n);const r=this.#e();t.appendChild(r),this.container.appendChild(t),e.appendChild(this.container)}renderGameOver(e=0){const t=document.querySelector("body"),n=document.createElement("dialog");n.className="game-dialog";const r=document.createElement("h3");r.className="dialog-header",r.textContent=f.#t(e);const o=document.createElement("h5");o.className="dialog-subheader",o.textContent="Play again?";const i=this.#e();return n.appendChild(r),n.appendChild(o),n.appendChild(i),t.appendChild(n),n}static#t(e){const t=f.gameResult;switch(e){case t.GAME_ENDED:return"Game ended!";case t.P1_WINS:return"Player 1 wins!";case t.P2_WINS:return"Player 2 wins!";case t.COMPUTER_WINS:return"Computer wins!"}}static gameResult={GAME_ENDED:0,P1_WINS:1,P2_WINS:2,COMPUTER_WINS:3};#e(){const e=document.createElement("div");e.className="welcome-btn-row";const t=document.createElement("button");t.className="welcome-btn",t.innerText="Play vs Computer";const n=document.createElement("button");return n.className="welcome-btn",n.innerText="Play vs Human",t.addEventListener("click",(()=>this.#n())),n.addEventListener("click",(()=>this.#r())),e.appendChild(t),e.appendChild(n),e}#n(){console.log(this.viewController),this.viewController.initGame(!0),this.#o()}#r(){this.viewController.initGame(!1),this.#o()}#o(){this.container.classList.contains("welcome-container")&&(this.container.classList.add("welcome-exit"),setTimeout((()=>{this.container.remove()}),1e3))}}const v=f,y=class{constructor(e){if(!e)throw Error("Ship requires a length to be initialized.");this.length=e,this.numHits=0,this.sunk=!1}sink(){this.sunk=!0}isSunk(){return this.sunk}hit(){this.sunk?console.log("Warning: Attempting to hit a ship already sunk."):(this.numHits++,this.numHits===this.length&&this.sink())}},x=class{constructor(e=7){this.size=e,this.board=Array.from({length:e},(()=>Array.from({length:e},(()=>0)))),this.ships=[],this.hits=[],this.misses=[],this.possibleMoves=this.#i()}insertShip(e,t,n,r=!0){if(e<0||e>=this.size||t<0||t>=this.size)throw Error("Co-ordinates outside bounds.");if(n<1||n>=this.size)throw Error("Length must be positive and less than board size.");return!!this.isSpaceAvailable(e,t,n,r)&&(this.#a(e,t,n,r),!0)}receiveAttack(e,t){return this.board[e][t]instanceof y?(this.board[e][t].hit(),this.board[e][t]=2,this.hits.push([e,t]),this.removePossibleMove(e,t),!0):0===this.board[e][t]&&(this.board[e][t]=1,this.misses.push([e,t]),this.removePossibleMove(e,t),!0)}checkAllSunk(){for(let e=0;e<this.ships.length;e++)if(!this.ships[e].isSunk())return!1;return!0}isSpaceAvailable(e,t,n,r){for(let o=0;o<n;o++){const n=e+(r?0:o),i=t+(r?o:0);if(n>=this.size||i>=this.size)return!1;if(this.board[n][i]instanceof y)return!1}return!0}#a(e,t,n,r){const o=new y(n);for(let i=0;i<n;i++){const n=e+(r?0:i),a=t+(r?i:0);this.board[n][a]=o}this.ships.push(o)}#i(){const e=[];for(let t=0;t<this.size;t++)for(let n=0;n<this.size;n++)e.push([t,n]);return e}removePossibleMove(e,t){const n=this.possibleMoves.findIndex((n=>n[0]===e&&n[1]===t));this.possibleMoves.splice(n,1)}},w=class{constructor(e,t){this.isComputer=e,this.board=new x(t)}static startingShips=[2,3,3,4,5]};class C{constructor(){this.boardsize=C.boardSize,this.player1=new w(!1,this.boardsize),this.player2=new w(!0,this.boardsize),this.turn=1,this.init()}static boardSize=10;initPlayer1(){this.player1.board.insertShip(0,0,2,!0),this.player1.board.insertShip(2,1,3,!0),this.player1.board.insertShip(4,7,3,!1),this.player1.board.insertShip(9,0,4,!0)}initPlayer2(){this.player2.board.insertShip(0,0,2,!0),this.player2.board.insertShip(2,1,3,!0),this.player2.board.insertShip(4,7,3,!1),this.player2.board.insertShip(9,0,4,!0)}init(){this.initPlayer1(),this.initPlayer2()}shotFired(e,t){const n=1===this.turn?this.player2:this.player1;return n.board.receiveAttack(e,t)?n.board.checkAllSunk()?C.ShotResult.GAME_OVER:(this.changeTurn(),C.ShotResult.SHOT_SENT):C.ShotResult.SHOT_NOT_SENT}changeTurn(){if(this.turn=1===this.turn?2:1,2===this.turn&&this.player2.isComputer){const e=this.generateComputerMove();if(this.shotFired(e[0],e[1]),2===this.turn)throw Error("Computer move wasn't successful")}}getActivePlayer(){return 1===this.turn?this.player1:this.player2}getOpponentPlayer(){return 1===this.turn?this.player2:this.player1}generateComputerMove(){if(!this.player2.isComputer)throw Error("Attempting to generate a computer move with no computer players.");const e=this.player1.board,{possibleMoves:t}=e;return 0===t.length?Error("No more possible moves remaining!"):t[Math.floor(Math.random()*t.length)]}static ShotResult={SHOT_NOT_SENT:0,SHOT_SENT:1,GAME_OVER:2}}const E=C,S=n.p+"12c9a82f1f69e46fe617456ba29648e5.webp";function N(e){const t=document.createElement("div");t.className="grid-container";const n=document.createElement("div");n.className="grid-row",n.appendChild(A());for(let r=0;r<e;r++){const o=document.createElement("div");o.className="grid-row",o.appendChild(k(r)),n.appendChild(A(r));for(let t=0;t<e;t++){const e=document.createElement("div");e.className="box",e.classList.add("box-empty"),e.setAttribute("data-x",r),e.setAttribute("data-y",t);const n=document.createElement("div");n.className="inner-box",e.appendChild(n),o.appendChild(e)}t.appendChild(o)}return t.appendChild(n),t}function k(e){const t=document.createElement("p");t.classList.add("coordinate");const n=String.fromCharCode("A".charCodeAt(0)+e);return t.textContent=n,t}function A(e){const t=document.createElement("p");return t.classList.add("coordinate"),null!=e&&(t.textContent=e),t}function L(e){const t=document.createElement("div");t.className="ship",t.setAttribute("data-ship",e);for(let n=0;n<e;n++){const e=document.createElement("div");e.className="inner-box",t.appendChild(e)}return t}const P=class{constructor(e,t){this.game=e,this.selectedShip=null,this.refreshBoard=t}openShipDeploy=e=>{document.body.style.userSelect="none";const{ship:t}=e.currentTarget.dataset,{board:n}=this.game.getActivePlayer(),r=document.querySelectorAll(".box"),{possibleMoves:o}=n;for(let e=0;e<o.length;e++){const i=o[e],a=r[e];n.isSpaceAvailable(i[0],i[1],t,"horizontal")&&a.classList.add("box-free")}this.selectedShip=t,document.addEventListener("mouseup",this.closeShipDeploy)};closeShipDeploy=e=>{let t=e.target;if(t.classList.contains("inner-box")&&(t=t.parentElement),t.classList.contains("box")){console.log("here");const{x:e}=t.dataset,{y:n}=t.dataset;this.game.getActivePlayer().board.insertShip(Number(e),Number(n),this.selectedShip)&&this.refreshBoard()}document.querySelectorAll(".box-free").forEach((e=>{e.classList.remove("box-free")})),document.body.style.userSelect="",document.removeEventListener("mouseup",this.closeShipDeploy),this.selectedShip=null}};const T=n.p+"0ee57cd88f081f46bb8e912b99983495.webp";class z{constructor(){this.game=null,this.selectedShip=null,this.events=null,this.banner={render:function(){const e=document.createElement("div");e.className="top-banner";const t=document.createElement("img");return t.className="battleships-header",t.src=S,e.appendChild(t),e}},this.gameControls=function(){let e=null;const t="Start game";function n(){return e.textContent===t}function r(){}function o(){}return{render:function(){const n=document.createElement("div");return n.className="button-container",e=document.createElement("button"),e.textContent=t,e.className="start-btn",n.appendChild(e),n},toggleButton:function(){n()?(e.removeEventListener("click",r),e.addEventListener("click",o),e.textContent="Restart game"):(e.textContent=t,e.className="active-btn")},activateButton:function(){if(e.classList.add("active-btn"),!n())throw Error("Restart button shouldn't need to be activated.");e.addEventListener("click",r)}}}(),this.main=function(e){const t=function(e){function t(e){const t=document.createElement("p");t.classList.add("coordinate");const n=String.fromCharCode("A".charCodeAt(0)+e);return t.textContent=n,t}function n(e){const t=document.createElement("p");return t.classList.add("coordinate"),null!=e&&(t.textContent=e),t}return{render:function(){const r=document.createElement("div");r.className="grid-container";const o=document.createElement("div");o.className="grid-row",o.appendChild(n());for(let i=0;i<e;i++){const a=document.createElement("div");a.className="grid-row",a.appendChild(t(i)),o.appendChild(n(i));for(let t=0;t<e;t++){const e=document.createElement("div");e.className="box",e.classList.add("box-empty"),e.setAttribute("data-x",i),e.setAttribute("data-y",t);const n=document.createElement("div");n.className="inner-box",e.appendChild(n),a.appendChild(e)}r.appendChild(a)}return r.appendChild(o),r}}}(E.boardSize),n=function(){function e(e,t){const n=document.createElement("div");n.className="ship",n.classList.add(t),n.setAttribute("data-ship",e),"vertical"===t&&n.classList.add("ship-empty");for(let t=0;t<e;t++){const e=document.createElement("div");e.className="inner-box",n.appendChild(e)}return n}return{render:function(){const t=document.createElement("div");t.className="gallery";const n=document.createElement("div");n.className="top-gallery";const r=document.createElement("div");r.className="bottom-gallery";const o=w.startingShips;for(let t=0;t<o.length;t++){const i=o[t],a=e(i,"horizontal"),s=e(i,"vertical");n.appendChild(a),r.appendChild(s)}return t.appendChild(n),t.appendChild(r),t}}}();function r(e){const r=document.createElement("div");r.className="main-section";const o=document.createElement("h2");let i;return o.className="player-name","Gallery"===e?i=n.render():(i=t.render(),i.id=`${e.toLowerCase()}-grid`),o.textContent=e,r.appendChild(o),r.appendChild(i),r}return{render:function(){const t=document.createElement("div");t.className="game-container";const n=e.deploymentPhase?"Gallery":"Player",o=e.deploymentPhase?"Player":"Opponent",i=r(n),a=r(o);return t.appendChild(i),t.appendChild(a),t}}}(this),this.body=document.querySelector("body"),this.body.style.backgroundImage=T,this.deploymentPhase=!0}showLaunchScreen(){const e=function(e){const t=document.createElement("div");function n(){t.classList.add("welcome-exit"),setTimeout((()=>{t.remove()}),1e3)}return{render:function(){t.className="welcome-container";const r=function(e){function t(){e.initDeployment()}function n(){e.initDeployment()}return{renderLaunchScreen:function(){const e=document.createElement("div");e.className="welcome-btn-container";const r=document.createElement("h1");r.className="welcome-header",r.innerText="Click to start!",e.appendChild(r);const o=function(){const e=document.createElement("div");e.className="welcome-btn-row";const r=document.createElement("button");r.className="welcome-btn",r.innerText="Play vs Computer";const o=document.createElement("button");return o.className="welcome-btn",o.innerText="Play vs Human",r.addEventListener("click",t),o.addEventListener("click",n),e.appendChild(r),e.appendChild(o),e}();return e.appendChild(o),e}}}(e);return t.appendChild(r.renderLaunchScreen()),t.querySelectorAll("button").forEach((e=>{e.addEventListener("click",n)})),t}}}(this);this.body.appendChild(e.render())}renderGame(){this.game=new E,this.body.appendChild(this.banner.render()),this.body.appendChild(this.main.render()),this.body.appendChild(this.gameControls.render())}initDeployment(){this.renderGame()}initGame(e){e?(this.game&&z.#s(),this.game=new E,this.events=new P(this.game,this.refreshBoard.bind(this))):console.log("Let's play against the human."),function(e){const t=document.querySelector("body"),n=document.createElement("div");n.className="main-section";const r=document.createElement("h2");r.className="player-name",r.textContent="Player",n.appendChild(r);const o=document.createElement("div");o.className="main-section";const i=document.createElement("h2");i.className="player-name",i.textContent="Opponent",o.appendChild(i);const a=N(e),s=N(e),c=document.createElement("div");c.className="game-container",a.id="player-grid",s.id="opponent-grid",n.appendChild(a),o.appendChild(s),c.appendChild(n),c.appendChild(o),t.appendChild(function(){const e=document.createElement("div");e.className="gallery",e.textContent="Naval base";const t=w.startingShips;for(let n=0;n<t.length;n++){const r=L(t[n]);e.appendChild(r)}return e}()),t.appendChild(function(){const e=document.createElement("div");e.className="top-banner";const t=document.createElement("img");return t.className="battleships-header",t.src=S,e.appendChild(t),e}()),t.appendChild(function(){const e=document.createElement("div");e.className="button-container";const t=document.createElement("button");return t.textContent="Start game",t.className="start-btn",e.appendChild(t),e}()),t.appendChild(c)}(this.game.boardsize),this.addListeners(),this.refreshBoard()}refreshBoard(){const e=document.querySelector("#player-grid"),t=document.querySelector("#opponent-grid");this.#c(e,!0),this.#c(t,!1)}static#s(){document.querySelector("body").innerHTML=""}#c(e,t=!0){const n=t?this.game.getActivePlayer():this.game.getOpponentPlayer(),r=e.querySelectorAll(".box");let o=0;for(let e=0;e<this.game.boardsize;e++){const i=n.board.board[e];for(let e=0;e<this.game.boardsize;e++){const n=i[e],a=r[o];a.className="box",0===n?a.classList.add("box-empty"):1===n?a.classList.add("box-miss"):2===n?a.classList.add("box-hit"):t?a.classList.add("box-ship"):a.classList.add("box-empty"),o++}}}addListeners(){const e=document.querySelectorAll(".ship");for(let t=0;t<e.length;t++)e[t].addEventListener("mousedown",this.events.openShipDeploy);document.querySelector("#opponent-grid").querySelectorAll(".box").forEach((e=>e.addEventListener("click",(e=>this.sendAttack(e)))))}showGameOver(e){new v(this).renderGameOver(e).showModal()}sendAttack(e){const t=e.currentTarget,{x:n}=t.dataset,{y:r}=t.dataset,o=this.game.shotFired(Number(n),Number(r));o===E.ShotResult.SHOT_SENT?this.refreshBoard():o===E.ShotResult.GAME_OVER&&(1===this.game.turn?this.showGameOver(v.gameResult.P1_WINS):this.game.player2.isComputer?this.showGameOver(v.gameResult.COMPUTER_WINS):this.showGameOver(v.gameResult.P2_WINS))}}(new z).showLaunchScreen()})();