(()=>{"use strict";var e={720:(e,n,t)=>{t.d(n,{A:()=>y});var r=t(601),o=t.n(r),i=t(314),a=t.n(i),s=t(417),c=t.n(s),l=new URL(t(747),t.b),d=new URL(t(564),t.b),h=new URL(t(641),t.b),p=new URL(t(240),t.b),u=new URL(t(158),t.b),m=a()(o()),g=c()(l),f=c()(d),b=c()(h),v=c()(p),x=c()(u);m.push([e.id,`* {\n    margin: 0;\n    padding: 0;\n    box-sizing: border-box;\n    font-family: 'Roboto';\n}\n\n@font-face {\n    font-family: 'Roboto';\n    src: url(${g});\n}\n@font-face {\n    font-family: 'Bangers';\n    src: url(${f});\n}\n\nbody {\n    height: 100vh;\n    background-color: black;\n    position: relative;\n    display: grid;\n    grid-template-rows: 1fr 5fr 2fr 24px;\n    /* background-image: url('../assets/battle-background.webp'); */\n}\n\n:root {\n    --box-size: 45px;\n    --grid-color: #64748b;\n    --grid-highlight: #455f85;\n    --fisher-width: calc(var(--box-size) * 0.7);\n    --galley-width: calc(var(--box-size) * 0.8);\n    --frigate-width: calc(var(--box-size) * 0.9);\n    --destroyer-width: var(--box-size);\n    --ship-height-margin: 0px;\n}\n\n@media (max-width: 1500px) {\n    :root {\n        --box-size: 35px;\n    }\n}\n\n@media (max-width: 1050px) {\n    :root {\n        --box-size: 30px;\n    }\n}\n\n\n\n/* Start screen */\n.welcome-container {\n    display: grid;\n    justify-content: center;\n    align-items: center;\n    background-image: url(${b});\n    background-size: cover;\n    background-position: 0 60%;\n    height: 100%;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    transition: transform 0.5s ease-in-out;\n    z-index: 5;\n}\n\n.welcome-exit {\n    transform: translateX(-100%); /* Slide out to the left */\n}\n\n.welcome-btn-container, .game-dialog {\n    background-color: #082f49;\n    border-radius: 50px;\n    width: 800px;\n    height: 300px;\n    padding: 50px 20px;\n    border: none;\n    outline: none;\n    box-shadow: 2px 2px 6px 2px black;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-around;\n}\n\n.welcome-header, .dialog-header  {\n    color: white;\n    text-align: center;\n    font-size: 40px;\n}\n\n.welcome-header {\n    text-transform: uppercase;\n    letter-spacing: 0.25ch;\n}\n\n.welcome-btn-row {\n    display: flex;\n    justify-content: space-around;\n}\n\n.welcome-btn {\n    background-color: #0284c7;\n    font-size: 24px;\n    border: none;\n    outline: none;\n    padding: 16px 32px;\n    border-radius: 20px;\n    transition-duration: 0.2s;\n    color: white;\n}\n\n.welcome-btn:hover {\n    cursor: pointer;\n    background-color: #0ea5e9;\n}\n\n/* Game over */\n.game-dialog, .info-dialog {\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    transform: translate(-50%, -20%);\n}\n\n.game-dialog::backdrop {\n    background: rgba(1, 11, 46, 0.5);\n}\n\n.dialog-subheader {\n    color: white;\n    text-align: center;\n    font-size: 25px;\n    font-weight: 100;\n}\n\n.dialog-container {\n    width:100%;\n    height:100%;\n    display: grid;\n    align-items: center;\n    justify-content: center;\n}\n\n/* Header styling */\n.top-banner {\n    display: flex;\n    flex-direction: column;\n    gap:20px;\n    align-items: center;\n    justify-content: center;\n    padding: 20px 0;\n    grid-row: 1/2;\n}\n\n.battleships-header {\n    /* height: 200px; */\n    width: 1000px;\n    border-radius: 40px;\n}\n\n.header-text {\n    font-size: 100px;\n    color: white;\n    font-weight: 700;\n    text-align: center;\n    text-transform: uppercase;\n    letter-spacing: 0.2ch;\n    text-shadow: 10px 10px black;\n    font-family: 'Bangers';\n}\n\n/* Grid styling */\n.grid-container {\n    user-select: none;\n}\n\n.grid-container, .grid-container * {\n    user-select: none;\n}\n\n.grid-row {\n    display: flex;\n}\n\n.box, .coordinate {\n    max-width: 55px;\n    aspect-ratio: 1;\n}\n\n.box {\n    border: 1px solid black;\n    display: grid;\n    justify-content: center;\n    align-items: center;\n    background-color: var(--grid-color);\n    transition-duration: 0.3s;\n    position: relative;\n    width: var(--box-size);\n    height: var(--box-size);\n}\n\n.box.box-free {\n    background-color: rgba(34, 197, 94, 0.8);\n}\n\n#opponent-grid .box:hover {\n    background-color: var(--grid-highlight);\n}\n\n#opponent-grid .box.box-miss:hover {\n    background-color: var(--grid-color);\n}\n\n#opponent-grid .box.box-miss:hover, \n#opponent-grid .box.box-hit:hover, \n#opponent-grid .box.box-ship:hover {\n    background-color: var(--grid-color);\n}\n\n.box-miss > .inner-box {\n    background-color: white;\n    box-shadow: 2px 2px 6px 0 black;\n}\n\n.box-hit > .inner-box {\n    background-image: url(${v});\n    background-size: contain;\n    width: calc(var(--box-size)/1.5);\n    height: calc(var(--box-size)/1.5);\n    z-index: 50;\n}\n\n#opponent-grid .box {\n    cursor: url(${x}) 25 15, auto;\n}\n\n.placed-ship {\n    position: absolute;\n    /* transform: translate(25%, 0); */\n    left: 50%;\n    top: 0;\n    transform: translate(-50%, 0);\n    z-index: 10;\n    pointer-events: none;\n}\n\n.placed-ship.horizontal {\n    left:0;\n    top:50%;\n    transform: rotate(90deg) translate(-50%,-100%);\n    transform-origin: top left;\n}\n\n.inner-box {\n    width: calc(var(--box-size)/2.5);\n    height: calc(var(--box-size)/2.5);\n    background-color: #1e293b;\n    border-radius: 50%;\n}\n\n.coordinate {\n    color: white;\n    text-align: center;\n    vertical-align: center;\n    width: var(--box-size);\n    line-height: var(--box-size);\n    font-size: 18px;\n    font-weight: 700;\n    cursor: alias;\n    user-select: none;\n}\n\n/* Game sizing */\n.game-container {\n    grid-row: 2/3;\n    display: flex;\n    gap: 100px;\n    justify-content: center;\n    padding-top: 20px;\n    box-sizing: border-box;\n    width: 100%;\n}\n\n.player-name {\n    /* margin-left: var(--box-size); */\n    color: white;\n    margin-bottom: 10px;\n    font-weight: 100;\n    font-size: 30px;\n}\n\n/* Gallery */\n.gallery {\n    padding: 10px;\n    display: grid;\n    grid-template-rows: 1fr 1fr;\n    grid-template-columns: repeat(6, 1fr);\n    align-items: center;\n    width: calc(11*var(--box-size));\n    height: calc(10*var(--box-size));\n    border-radius: 20px;\n    background: radial-gradient(\n        circle,\n        rgba(0, 51, 102, 0.9) 0%,   \n        rgba(0, 76, 102, 0.8) 40%,  \n        rgba(0, 102, 102, 0.7) 60%, \n        rgba(0, 128, 128, 0.65) 90%, \n        rgba(0, 153, 153, 0.6) 100% \n      )\n    }\n\n.boat-gallery {\n    -webkit-user-drag: none;\n    grid-column: span 2;\n    z-index: 15;\n}\n\n.ship-container {\n    grid-column: span 2;\n    align-self: center;\n    justify-self: center;\n}\n\n.ship-container:nth-child(4) {\n    grid-column: span 3;\n}\n\n.boat-gallery:hover {\n    cursor:grab;\n}\n\n.boat-gallery:active {\n    cursor: grabbing;\n}\n\n.fisher-gallery {\n    height:calc(var(--box-size) * 2 - var(--ship-height-margin));\n    width: var(--fisher-width);\n}\n\n.galley-gallery {\n    height:calc(var(--box-size) * 3 - var(--ship-height-margin));\n    width: var(--galley-width);}\n\n.frigate-gallery {\n    height:calc(var(--box-size) * 4 - var(--ship-height-margin));\n    width: var(--frigate-width);\n}\n\n.boat-gallery.frigate-gallery {\n    grid-column: span 3;\n}\n\n.destroyer-gallery {\n    height:calc(var(--box-size) * 5 - var(--ship-height-margin));\n    width: var(--destroyer-width);\n}\n\n.horizontal {\n    transform: rotate(90deg);\n}\n\n/* Buttons */\n.button-container {\n    grid-row: 3/4;\n    margin: 0 auto;\n    padding: 40px;\n}\n\n.start-btn {\n    padding: 16px 40px;\n    border-radius: 20px;\n    font-size: 32px;\n    border: none;\n    outline: none;\n    background-color: gray;\n    color: white;\n    font-weight: 700;\n}\n\n.start-btn.active-btn {\n    background-color: green;\n}\n\n.active-btn:hover {\n    cursor: pointer;\n}\n\n/*Footer*/\n.credits {\n    grid-row: 4/5;\n    left: 0;\n    bottom: 0;\n    width: 100%;\n    height:24px;\n    background-color: wheat;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    gap:10px;\n    z-index: 100;;\n}\n\n.odin-img {\n    height:20px;\n}\n\n/* Info modal */\n.banner-subheader {\n    padding: 16px 40px;\n    border-radius: 20px;\n    background-color:#0c4a6e;\n    box-shadow: 6px 6px 10px 0 black;\n    display: flex;\n    flex-direction: column;\n    gap: 30px;\n}\n\n.subheader-title {\n    color:white;\n    font-size: 28px;\n    font-weight: 700;\n}\n\n.subheader-info {\n    color:white;\n    font-size: 20px;\n}\n\n/* Game over */\n.info-dialog {\n    position: absolute;\n    left: 50%;\n    top: 40%;\n    transform: translate(-50%, -20%);\n}\n\n\n.info-dialog {\n    background-color: #082f49;\n    border-radius: 50px;\n    width: fit-content;\n    height: 250px;\n    padding: 50px 20px;\n    border: none;\n    outline: none;\n    box-shadow: 2px 2px 6px 2px black;\n    display: flex;\n    flex-direction: column;\n    gap:10px;\n    align-items: center;\n    opacity: 0;\n    transition-duration: 0.5s;\n}\n\n#active-info {\n    opacity: 1;\n}\n\n.confirm-btn {\n    margin-top: auto;\n    background-color: #16a34a;\n    border: 2px solid white;\n    width:30px;\n    box-sizing: content-box;\n    padding: 8px;\n    border-radius: 50%;\n    transition-duration: 0.3s;\n}\n\n.confirm-btn:hover {\n    cursor: pointer;\n    background-color: #4ade80;\n}\n\n@media (max-width: 700px) {\n    .game-container {\n        flex-direction: column;\n        gap:50px;\n        align-items: center;\n    }\n\n    .header-text {\n        font-size: 80px;\n    }\n}`,""]);const y=m},314:e=>{e.exports=function(e){var n=[];return n.toString=function(){return this.map((function(n){var t="",r=void 0!==n[5];return n[4]&&(t+="@supports (".concat(n[4],") {")),n[2]&&(t+="@media ".concat(n[2]," {")),r&&(t+="@layer".concat(n[5].length>0?" ".concat(n[5]):""," {")),t+=e(n),r&&(t+="}"),n[2]&&(t+="}"),n[4]&&(t+="}"),t})).join("")},n.i=function(e,t,r,o,i){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(r)for(var s=0;s<this.length;s++){var c=this[s][0];null!=c&&(a[c]=!0)}for(var l=0;l<e.length;l++){var d=[].concat(e[l]);r&&a[d[0]]||(void 0!==i&&(void 0===d[5]||(d[1]="@layer".concat(d[5].length>0?" ".concat(d[5]):""," {").concat(d[1],"}")),d[5]=i),t&&(d[2]?(d[1]="@media ".concat(d[2]," {").concat(d[1],"}"),d[2]=t):d[2]=t),o&&(d[4]?(d[1]="@supports (".concat(d[4],") {").concat(d[1],"}"),d[4]=o):d[4]="".concat(o)),n.push(d))}},n}},417:e=>{e.exports=function(e,n){return n||(n={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),n.hash&&(e+=n.hash),/["'() \t\n]|(%20)/.test(e)||n.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},601:e=>{e.exports=function(e){return e[1]}},72:e=>{var n=[];function t(e){for(var t=-1,r=0;r<n.length;r++)if(n[r].identifier===e){t=r;break}return t}function r(e,r){for(var i={},a=[],s=0;s<e.length;s++){var c=e[s],l=r.base?c[0]+r.base:c[0],d=i[l]||0,h="".concat(l," ").concat(d);i[l]=d+1;var p=t(h),u={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==p)n[p].references++,n[p].updater(u);else{var m=o(u,r);r.byIndex=s,n.splice(s,0,{identifier:h,updater:m,references:1})}a.push(h)}return a}function o(e,n){var t=n.domAPI(n);return t.update(e),function(n){if(n){if(n.css===e.css&&n.media===e.media&&n.sourceMap===e.sourceMap&&n.supports===e.supports&&n.layer===e.layer)return;t.update(e=n)}else t.remove()}}e.exports=function(e,o){var i=r(e=e||[],o=o||{});return function(e){e=e||[];for(var a=0;a<i.length;a++){var s=t(i[a]);n[s].references--}for(var c=r(e,o),l=0;l<i.length;l++){var d=t(i[l]);0===n[d].references&&(n[d].updater(),n.splice(d,1))}i=c}}},659:e=>{var n={};e.exports=function(e,t){var r=function(e){if(void 0===n[e]){var t=document.querySelector(e);if(window.HTMLIFrameElement&&t instanceof window.HTMLIFrameElement)try{t=t.contentDocument.head}catch(e){t=null}n[e]=t}return n[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(t)}},540:e=>{e.exports=function(e){var n=document.createElement("style");return e.setAttributes(n,e.attributes),e.insert(n,e.options),n}},56:(e,n,t)=>{e.exports=function(e){var n=t.nc;n&&e.setAttribute("nonce",n)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var n=e.insertStyleElement(e);return{update:function(t){!function(e,n,t){var r="";t.supports&&(r+="@supports (".concat(t.supports,") {")),t.media&&(r+="@media ".concat(t.media," {"));var o=void 0!==t.layer;o&&(r+="@layer".concat(t.layer.length>0?" ".concat(t.layer):""," {")),r+=t.css,o&&(r+="}"),t.media&&(r+="}"),t.supports&&(r+="}");var i=t.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),n.styleTagTransform(r,e,n.options)}(n,e,t)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(n)}}}},113:e=>{e.exports=function(e,n){if(n.styleSheet)n.styleSheet.cssText=e;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(e))}}},240:(e,n,t)=>{e.exports=t.p+"edc80bcc0619ec50b098.png"},564:(e,n,t)=>{e.exports=t.p+"f0f1f39c39ee2df57fd7.ttf"},747:(e,n,t)=>{e.exports=t.p+"27f62b53b93858475a7f.ttf"},158:(e,n,t)=>{e.exports=t.p+"0b14e33f4ef77bcf56b8.png"},641:(e,n,t)=>{e.exports=t.p+"00d3be16d5f052e5a2e5.jpeg"}},n={};function t(r){var o=n[r];if(void 0!==o)return o.exports;var i=n[r]={id:r,exports:{}};return e[r](i,i.exports,t),i.exports}t.m=e,t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var n=t.g.document;if(!e&&n&&(n.currentScript&&"SCRIPT"===n.currentScript.tagName.toUpperCase()&&(e=n.currentScript.src),!e)){var r=n.getElementsByTagName("script");if(r.length)for(var o=r.length-1;o>-1&&(!e||!/^http(s?):/.test(e));)e=r[o--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})(),t.b=document.baseURI||self.location.href,t.nc=void 0;var r=t(72),o=t.n(r),i=t(825),a=t.n(i),s=t(659),c=t.n(s),l=t(56),d=t.n(l),h=t(540),p=t.n(h),u=t(113),m=t.n(u),g=t(720),f={};f.styleTagTransform=m(),f.setAttributes=d(),f.insert=c().bind(null,"head"),f.domAPI=a(),f.insertStyleElement=p(),o()(g.A,f),g.A&&g.A.locals&&g.A.locals;const b=class{constructor(e,n=null,t=!0){if(!e)throw Error("Ship requires a length to be initialized.");this.length=e,this.numHits=0,this.sunk=!1,this.coordinate=n,this.horizontal=t}sink(){this.sunk=!0}isSunk(){return this.sunk}hit(){this.sunk?console.log("Warning: Attempting to hit a ship already sunk."):(this.numHits++,this.numHits===this.length&&this.sink())}};class v{constructor(e=7){this.size=e,this.board=Array.from({length:e},(()=>Array.from({length:e},(()=>0)))),this.ships=[],this.dockedShips=v.getStartingShips(),this.hits=[],this.misses=[],this.possibleMoves=this.#e()}insertShip(e,n,t,r=!0){if(e<0||e>=this.size||n<0||n>=this.size)throw Error("Co-ordinates outside bounds.");if(t<1||t>=this.size)throw Error("Length must be positive and less than board size.");return!!this.isSpaceAvailable(e,n,t,r)&&(this.#n(e,n,t,r),!0)}receiveAttack(e,n){return this.board[e][n]instanceof b?(this.board[e][n].hit(),this.board[e][n]=2,this.hits.push([e,n]),this.removePossibleMove(e,n),!0):0===this.board[e][n]&&(this.board[e][n]=1,this.misses.push([e,n]),this.removePossibleMove(e,n),!0)}checkAllSunk(){for(let e=0;e<this.ships.length;e++)if(!this.ships[e].isSunk())return!1;return!0}deployShip(e){const n=this.dockedShips.findIndex((n=>n.length===e));if(-1===n)throw Error("No ship found in dock!");return this.dockedShips.splice(n,1),0===this.dockedShips.length}setRandomDeployment(){for(;this.dockedShips.length>0;){const[e]=this.dockedShips,n=1===Math.round(Math.random()),t=Math.floor(Math.random()*this.size),r=Math.floor(Math.random()*this.size),{length:o}=e;this.insertShip(t,r,o,n)&&this.deployShip(o)}}isSpaceAvailable(e,n,t,r){for(let o=0;o<t;o++){const t=e+(r?0:o),i=n+(r?o:0);if(t>=this.size||i>=this.size)return!1;if(this.board[t][i]instanceof b)return!1}return!0}#n(e,n,t,r){const o=new b(t,[e,n],r);for(let i=0;i<t;i++){const t=e+(r?0:i),a=n+(r?i:0);this.board[t][a]=o}this.ships.push(o)}#e(){const e=[];for(let n=0;n<this.size;n++)for(let t=0;t<this.size;t++)e.push([n,t]);return e}removePossibleMove(e,n){const t=this.possibleMoves.findIndex((t=>t[0]===e&&t[1]===n));this.possibleMoves.splice(t,1)}static getStartingShips(){return Array.from([2,3,3,4,5],(e=>({length:e,deployed:!1})))}}const x=v,y=class{constructor(e,n){this.isComputer=e,this.board=new x(n),this.moveStack=[]}};class w{constructor(){this.boardsize=w.boardSize,this.player1=new y(!1,this.boardsize),this.player2=new y(!0,this.boardsize),this.turn=1,this.init()}static boardSize=10;initPlayer1(){}initPlayer2(){this.player2.board.setRandomDeployment()}init(){this.initPlayer1(),this.initPlayer2()}shotFired(e,n){return!!(1===this.turn?this.player2:this.player1).board.receiveAttack(e,n)&&(this.changeTurn(),!0)}changeTurn(){this.turn=1===this.turn?2:1,2===this.turn&&this.player2.isComputer&&this.makeComputerMove()}makeComputerMove(){const e=this.player1.board.hits.length,n=this.generateComputerMove();this.shotFired(n[0],n[1]),e!=this.player1.board.hits.length&&this.addToMoveStack(n)}addToMoveStack(e){const n=this.player1.board,{possibleMoves:t}=n,[r,o]=e;t.forEach((e=>{const n=Math.abs(e[0]-r),t=Math.abs(e[1]-o);n<2&&t<2&&n*t==0&&this.player2.moveStack.push(e)}))}getActivePlayer(){return 1===this.turn?this.player1:this.player2}getOpponentPlayer(){return 1===this.turn?this.player2:this.player1}generateComputerMove(){if(!this.player2.isComputer)throw Error("Attempting to generate a computer move with no computer players.");const e=this.player1.board,{possibleMoves:n}=e;return 0===n.length?Error("No more possible moves remaining!"):this.player2.moveStack.length>0?this.player2.moveStack.pop():n[Math.floor(Math.random()*n.length)]}static ShotResult={SHOT_NOT_SENT:0,SHOT_SENT:1,GAME_OVER:2};static resultMap={GAME_ENDED:0,P1_WINS:1,P2_WINS:2,COMPUTER_WINS:3}}const C=w;const k=t.p+"ddce2e1e5ef60024f029.svg";function E(e){function n(){const e=document.createElement("div");e.className="welcome-btn-row";const n=document.createElement("button");n.className="welcome-btn",n.innerText="Play vs Computer";const o=document.createElement("button");return o.className="welcome-btn",o.innerText="Play vs Human",n.addEventListener("click",t),o.addEventListener("click",r),e.appendChild(n),e}function t(){e.initDeployment()}function r(){e.initDeployment()}return{renderLaunchScreen:function(){const e=document.createElement("div");e.className="welcome-btn-container";const t=document.createElement("h1");t.className="welcome-header",t.innerText="Click to start!",e.appendChild(t);const r=n();return e.appendChild(r),e},renderGameOver:function(e=0){const t=document.querySelector("body"),r=document.createElement("dialog");r.className="game-dialog";const o=document.createElement("h3");o.className="dialog-header",o.textContent=function(e){const{resultMap:n}=C;switch(e){case n.GAME_ENDED:return"Game ended!";case n.P1_WINS:return"Player 1 wins!";case n.P2_WINS:return"Player 2 wins!";case n.COMPUTER_WINS:return"Computer wins!"}}(e);const i=document.createElement("h5");i.className="dialog-subheader",i.textContent="Play again?";const a=n();return a.querySelectorAll("button").forEach((e=>{e.addEventListener("click",(()=>r.remove()))})),r.appendChild(o),r.appendChild(i),r.appendChild(a),t.appendChild(r),r},renderInfo:function(){const e=document.createElement("dialog");e.className="info-dialog";const n=document.createElement("p"),t=document.createElement("p"),r=document.createElement("img");return r.src=k,r.alt="Confirm button",r.className="confirm-btn",r.addEventListener("click",(()=>e.remove())),n.className="subheader-title",t.className="subheader-info",n.textContent="Deployment",t.textContent="Drag and drop your ships, and click to turn",e.appendChild(n),e.appendChild(t),e.appendChild(r),document.body.appendChild(e),e.showModal(),e.id="active-info",e}}}const S=t.p+"75a83499f89d4cc0a921a58efb4fb97f.webp",z=t.p+"8fa5ade81b2e51c4e77971e73290512c.webp",N=t.p+"8fa5ade81b2e51c4e77971e73290512c.webp",L=t.p+"60f23e2604051e92fa7dd42deb87a31a.webp";function P(){const e={2:{img:L,class:"fisher-gallery",holes:2},3:{img:N,class:"galley-gallery",holes:3},4:{img:z,class:"frigate-gallery",holes:4},5:{img:S,class:"destroyer-gallery",holes:5}};return{renderImage:function(n){const t=e[n],r=document.createElement("img");return r.src=t.img,r.alt=`Image of a ship with ${t.holes} holes.`,r.setAttribute("data-ship",t.holes),r.className="boat-gallery",r.classList.add(t.class),r}}}function M(e){const n=document.createElement("div");n.className="grid-container";const t=C.boardSize,r=[],o=P();function i(e){const n=document.createElement("p");n.classList.add("coordinate");const t=String.fromCharCode("A".charCodeAt(0)+e);return n.textContent=t,n}function a(e){const n=document.createElement("p");return n.classList.add("coordinate"),null!=e&&(n.textContent=e),n}return function(){const e=document.createElement("div");e.className="grid-row",e.appendChild(a());for(let o=0;o<t;o++){const s=document.createElement("div");s.className="grid-row",s.appendChild(i(o)),e.appendChild(a(o));for(let e=0;e<t;e++){const n=document.createElement("div");n.className="box",n.setAttribute("data-x",o),n.setAttribute("data-y",e);const t=document.createElement("div");t.className="inner-box",n.appendChild(t),s.appendChild(n),r.push(n)}n.appendChild(s)}n.appendChild(e)}(),{getContainer:function(){return n},updateGrid:function(e,n){const i=e.board.board.flat();for(let e=0;e<i.length;e++){const t=i[e],o=r[e];switch(o.className="box","IMG"===o.lastElementChild.tagName&&o.lastElementChild.remove(),t){case 0:break;case 1:o.classList.add("box-miss");break;case 2:o.classList.add("box-hit");break;default:n&&o.classList.add("box-ship")}}!function(e,n){const{ships:i}=e.board;i.forEach((e=>{if(!n&&!e.sunk)return;const[i,a]=e.coordinate,s=r[function(e,n){return t*e+n}(i,a)];if("IMG"===s.lastElementChild.tagName)return;const c=o.renderImage(e.length);c.classList.add("placed-ship"),e.horizontal&&c.classList.add("horizontal"),s.appendChild(c)}))}(e,n)},activateListeners:function(){const n=function(e){return{sendAttack:function(n){if(e.deploymentPhase)return;const t=n.currentTarget,{x:r}=t.dataset,{y:o}=t.dataset;e.game.shotFired(Number(r),Number(o))&&e.refresh()}}}(e);r.forEach((e=>{e.addEventListener("click",n.sendAttack)}))},clearShips:function(){r.forEach((e=>{const n=e.lastElementChild;"IMG"===n.tagName&&n.remove()}))}}}const A=t.p+"d49fc5392ae4c5497f21a73b7bda7b61.webp",T=t.p+"7e92668e1765b7e80e10.png";(new class{constructor(){this.game=null,this.selectedShip=null,this.events=null,this.banner={render:function(){const e=document.createElement("div");e.className="top-banner";const n=document.createElement("h1");return n.className="header-text",n.textContent="battleships",e.appendChild(n),e}},this.gameControls=function(e){const n=document.createElement("div");n.className="button-container";const t=document.createElement("button");t.className="start-btn",n.appendChild(t);const r="Start game";function o(){e.initGame()}function i(){e.initDeployment()}return{render:function(){return e.deploymentPhase?(t.textContent=r,t.classList.remove("active-btn"),t.removeEventListener("click",i)):(t.textContent="Restart game",t.classList.add("active-btn"),t.removeEventListener("click",o),t.addEventListener("click",i)),n},activateButton:function(){if(t.classList.add("active-btn"),t.textContent!==r)throw Error("Restart button shouldn't need to be activated.");t.addEventListener("click",o)},deactivateButton:function(){t.classList.add("active-btn"),t.removeEventListener("click",o)}}}(this),this.main=function(e){const n=M(e),t=M(e),r=function(e){const n=document.createElement("div");n.className="gallery";const t=P();let r,o,i,a,s=!1;function c(e){s=!0,r=e.currentTarget,a=r.classList.contains("horizontal");const n=window.getComputedStyle(r);o=parseFloat(n.getPropertyValue("width")),i=parseFloat(n.getPropertyValue("height")),document.addEventListener("mousemove",d),document.addEventListener("mouseup",h)}function l(e){e.currentTarget.classList.toggle("horizontal")}function d(n){if(!s)return;const t=n.clientX-(a?-i/3:o/2),c=n.clientY-(a?i/2:0);r.style.position="absolute",r.style.left=`${t}px`,r.style.top=`${c}px`,r.removeEventListener("mouseup",l),function(){const{ship:n}=r.dataset,{board:t}=e.game.getActivePlayer(),o=document.querySelectorAll(".box"),{possibleMoves:i}=t;for(let e=0;e<i.length;e++){const r=i[e],s=o[e];t.isSpaceAvailable(r[0],r[1],n,a)&&s.classList.add("box-free")}}()}function h(n){s=!1;const t=n.clientX,o=n.clientY;r.style.position="static";const i=document.elementFromPoint(t,o).closest(".box");if(i){const{board:n}=e.game.getActivePlayer(),t=Number(r.dataset.ship);n.insertShip(Number(i.dataset.x),Number(i.dataset.y),t,a),n.deployShip(t)&&e.setReady(),e.main.refreshBoard()}else r.style.position="static";document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",h),r.addEventListener("mouseup",l),document.querySelectorAll(".box-free").forEach((e=>{e.classList.remove("box-free")}))}return{render:function(){for(;n.firstChild;)n.firstChild.remove();e.game.getActivePlayer().board.dockedShips.forEach((e=>{n.appendChild(function(e){const n=document.createElement("div");n.className="ship-container";const r=t.renderImage(e);return r.addEventListener("mousedown",c),r.addEventListener("mouseup",l),n.appendChild(r),n}(e.length))}))},getContainer:function(){return n},updateGallery:function(){console.log("updating gallery")}}}(e),o=document.createElement("div");function i(e){const o=document.createElement("div");o.className="main-section";const i=document.createElement("h2");let a;return i.className="player-name",i.textContent=e,"Gallery"===e?(i.textContent="Shipyard",a=r.getContainer()):"Player"===e?(a=n.getContainer(),a.id="player-grid"):(a=t.getContainer(),a.id="opponent-grid"),o.appendChild(i),o.appendChild(a),o}function a(){e.deploymentPhase&&r.render(),n.updateGrid(e.game.getActivePlayer(),!0),t.updateGrid(e.game.getOpponentPlayer(),!1)}return o.className="game-container",{render:function(){for(;o.firstChild;)o.removeChild(o.firstChild);const n=e.deploymentPhase?"Gallery":"Player",t=e.deploymentPhase?"Player":"Opponent";a();const r=i(n),s=i(t);return o.appendChild(r),o.appendChild(s),o},refreshBoard:a,activateAttackListeners:function(){t.activateListeners()},clearShips:function(){n.clearShips(),t.clearShips()}}}(this),this.body=document.querySelector("body"),this.body.style.backgroundImage=`url(${A})`,this.deploymentPhase=!0,this.popupController=E(this),function(){const e=document.createElement("footer");e.className="credits";const n=document.createElement("img");n.className="odin-img",n.src=T,n.alt="The Odin Project";const t=document.createElement("span");t.textContent="© palmwi2010 as part of The Odin Project",e.appendChild(n),e.appendChild(t),document.body.appendChild(e)}()}showLaunchScreen(){const e=function(e){const n=document.createElement("div");function t(){n.classList.add("welcome-exit"),setTimeout((()=>{n.remove()}),1e3)}return{render:function(){n.className="welcome-container";const r=E(e);return n.appendChild(r.renderLaunchScreen()),n.querySelectorAll("button").forEach((e=>{e.addEventListener("click",t)})),n}}}(this);this.body.appendChild(e.render())}renderGame(){this.game?(this.game=new C,this.main.clearShips(),this.main.refreshBoard(),this.main.render(),this.gameControls.render()):(this.game=new C,this.body.appendChild(this.banner.render()),this.body.appendChild(this.main.render()),this.body.appendChild(this.gameControls.render()))}refresh(){this.main.refreshBoard(),this.checkEndGame()}checkEndGame(){this.game.player1.board.checkAllSunk()?this.showGameOver(C.resultMap.P2_WINS):this.game.player2.board.checkAllSunk()&&this.showGameOver(C.resultMap.P1_WINS)}initDeployment(){setTimeout((()=>this.popupController.renderInfo()),700),this.deploymentPhase=!0,this.renderGame()}initGame(){this.changeDeploymentPhase(),this.main.refreshBoard(),this.main.activateAttackListeners()}setReady(){this.gameControls.activateButton()}setUnready(){this.gameControls.deactivateButton()}changeDeploymentPhase(){this.deploymentPhase=!1,this.main.render(),this.gameControls.render()}showGameOver(e){this.popupController.renderGameOver(e).showModal()}}).showLaunchScreen()})();